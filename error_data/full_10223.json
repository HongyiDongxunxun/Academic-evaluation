{
  "original_filename": "full_10223.md",
  "高性能区块链关键技术研究综述": {
    "context1": "董振恒」吕学强²任维平」姜阳² 李果林1,2  \n1(北京信息科技大学网络文化与数字传播北京市重点实验室 北京 100101)  \n2(阳光易购(北京)科技有限公司北京 100036)",
    "context2": "摘要：【目的】对高性能区块链的关键技术进行调研和总结,探讨高性能区块链的研究进展与面临的主要问题、关键技术以及研究趋势与未来发展方向。【文献范围】以“Consensus Algorithm”、“Smart Contract”、\"Blockchain”、“共识算法”、“智能合约\"为检索词在Webof Science、谷歌学术、中国知网及其他互联网资源平台检索文献,经过筛选共选择39篇文献进行综述。【方法】采用文献调研的方法,分别总结共识算法的演进过程、智能合约应用以及实现平台的优缺点。【结果】本研究有助于了解现阶段实现高性能区块链包含的共识算法以及智能合约方面的关键问题和关键方法。【局限】共识算法研究发展速度较快,出现的共识算法较多，文中提到的共识算法仅为分类中有代表性的部分算法。智能合约的实现平台也不断涌现，仅针对有代表性的实现平台进行介绍。【结论】对实现高性能区块链的关键技术——共识算法与智能合约,分别进行归类总结,可为后续高性能区块链的研究提供思路与启发。",
    "context3": "关键词：高性能区块链共识算法智能合约 分类号：TP309 DOI:10.11925/infotech.2096-3467.2020.1210",
    "context4": "引用本文：董振恒，吕学强，任维平等.高性能区块链关键技术研究综述[J].数据分析与知识发现,2021,5 (6): 14-24.(Dong Zhenheng,Lv Xueqiang, Ren Weiping,et al. Review of Key Technologies of High Performance Blockchain[J]. Data Analysis and Knowledge Discovery, 2021, 5(6): 14-24.)"
  },
  "1引言": {
    "context1": "区块链是比特币系统的底层技术，采用分布式架构，可以将其定义为去中心化的分布式账本数据库，具有安全、不可篡改、可访问、无第三方等特性。去中心化是指区块链中不存在中心,或者每个节点都是区块链的中心;分布式账本数据库是指区块链的记录方式不仅将每笔交易数据都存储到各个节点中，而且每个节点同步共享复制整个账本的数据。",
    "context2": "由于区块链的特性，其产业价值也逐渐确定。近年来，区块链的应用不仅涉及金融[2-3]、供应链[4]医疗[5]、政务司法[等多个领域，同时也为公益慈善7以及公益环保[8]等公共服务领域带来新一轮的发展机遇。针对区块链现阶段以及未来的发展与应用，陈纯院士提出提高区块链和联盟链的高性能是实现发展的关键步骤。关键技术需要在各个方面进行突破,通过高性能的共识算法、高效智能合约引擎以及新型的共识机制能够提高区块链共识效率与安全性[9]。",
    "context3": "本文对实现区块链高性能的共识算法与智能合约的发展及其关键技术进行综述。首先对区块链中的共识算法展开介绍,按照共识算法的选主策略进行分类,以不同类别中共识算法性能的提升为主线，介绍其共识思想，并对其性能以及优缺点进行分析;其次,对智能合约展开介绍，阐述智能合约的基本概念,并且从智能合约的特点出发阐述其工作原理以及与区块链的关系，接着以智能合约的关键技术为主线,从平台的性能角度对实现智能合约的技术平台展开叙述并分析各个平台的优缺点。"
  },
  "2高性能共识算法": "",
  "2.1共识算法概述": {
    "context1": "在区块链系统中，各个节点中的账本数据需要保持一致。在传统分布式系统中,要保持各节点数据的一致性，其他节点只需要与中心服务器同步即可。但是由于区块链去中心化的结构，系统中没有中心服务器或者\"主节点\"的存在,在区块链中如何保持参与节点数据的一致性是核心问题。解决此问题的方法即是共识算法。共识算法的本质是通过去中心化的思想使得区块链中所有参与节点的状态达成统一的规则，使每个参与的节点按照制定的规则确认各自的数据,从而保持数据一致。基于任务共识算法的目标包括如下几个方面。",
    "context2": "(1)达成一致：确保区块链系统中数据的真实性与准确性。",
    "context3": "(2)激励机制：作为一个去中心化并且无信任的分布式系统,需要调动每个参与者的积极性。而共识算法通过奖励积极行为、惩治消极行为的赏罚机制来完成参与者积极性调用这一任务。",
    "context4": "(3)公平公正：由于区块链去中心化的特性，任何节点都可以参与到区块链中，这就要求参与到区块链中的所有节点都需要被平等地对待，所以共识算法需要确保参与到区块链中的每个节点都是公平的,即在区块链中不存在区别对待的现象。",
    "context5": "(4)容错机制：容错是指分布式系统在出现故障、面临威胁或面对恶行攻击时仍能正常运行。因此,共识算法需要确保区块链具有容错性,达到可靠和一致的目的。"
  },
  "2.2共识算法关键技术": {
    "context1": "作为以时间为顺序依次存储数据的数据结构，区块链系统中可应用不同的共识算法[10]。区块链系统中利用共识算法保证整个系统的一致性，所以共识算法也成为区块链设计的核心部分[]。",
    "context2": "共识算法有多种分类方法，按照容错方式可分为拜占庭容错和非拜占庭容错两类;按照部署方式可分为公有链共识算法、私有链共识算法和联盟链共识算法三类。按照共识过程中选主策略的不同，本文将区块链共识算法分为选举类、证明类、随机类、联盟类[12],并将基于拜占庭容错的算法作为一类进行介绍。",
    "context3": "以共识算法的5种类型为单位，介绍不同类型共识算法的基本概念，按照其发展脉络以及共识算法的性能展开介绍,以共识算法的去中心化程度、交易速度、容错性能以及安全机制为性能指标,着重关注共识性能的提升与发展。"
  },
  "（1）选举类共识算法": {
    "context1": "在选举类共识算法中，节点通过投票的方式选举出当前轮次记账节点，获得半数以上投票的节点会成为领导者获得记账权。Paxos算法、Raft算法以及Zyzzyva算法便属于此类共识算法。",
    "context2": "$\\textcircled{1}$ Paxos",
    "context3": "Paxos算法的思想[13]由Lamport首次提出,用于解决分布式系统中各节点的共识问题。假设分布式系统中各节点的初始状态完全一致，并且接收到的信息也完全一致，按照信息指令执行相同的操作，那么各节点最终的状态一定是一致的。为了达到每个节点都执行相同命令的目的,需要在每一条指令上执行“一致性算法”,确保系统中的每个节点接受到的指令以及执行的指令完全一致。",
    "context4": "系统中节点之间的通信模式分为消息传递和内存共享两种。Paxos是基于消息传递模式的一致性算法[14],将系统中的角色分为提议者、决策者和学习者。",
    "context5": "提议者负责提案，提案信息包括提案编号和提议内容;决策者参与决策，负责回应提议者的提案，如果提案被半数以上的决策者接受，则提案通过；学习者负责学习决策者最新达成一致的提案。Paxos算法使用\"大多数机制\"进行容错，在有 $2 \\mathrm { F } { + } 1$ 个节点的系统中允许F个节点同时出现故障。由于其强大的容错性能,Paxos算法容忍信息丢失、乱序以及不可靠的消息传递[15]。",
    "context6": "很长时间以来,Paxos算法都是一致性的事实标准。但是它存在两大缺点：难以理解和证明、难以在实际工程中实现。于是在Paxos算法的基础上,衍生出易于理解和实现的Raft算法。",
    "context7": "$\\textcircled{2}$ Raft",
    "context8": "Paxos算法具有强大的容错能力但其原理太过复杂并且难以实现。2014年,斯坦福大学的Ongaro等提出Raft共识算法[16]。Raft算法在借鉴Paxos算法强大容错性能的基础上,对其复杂的实现过程进行简化,将系统中的角色分为领导者、跟从者和候选者，根据角色赋予不同的权限与职能。Raft算法主要用于管理日志的一致性，为了达到易懂易用的目的，此算法将分布式系统中的一致性问题进行分解，将复杂的分布式共识问题拆分为领导选举、日志复制和安全性三个子问题[17]。在容错方面,Raft算法允许具有N个节点的区块链系统中有(N-1)/2个节点同时出现故障。",
    "context9": "在性能方面，相比于Paxos算法，Raft算法的性能并未明显提升，但是它的可理解性好，可操作性高，改进了Paxos算法难以理解和证明、难以实现的缺点，按照协议即可以实现出稳定、健壮的算法。与Paxos算法相比,Raft算法更容易理解和实现。",
    "context10": "$\\textcircled{3}$ Zyzzyva",
    "context11": "Zyzzyva算法也是通过选举出领导者进行共识事务的组织发起、其余参与者跟随验证或确认的方式,同时使用推测降低成本并简化拜占庭容错状态机副本的共识算法[18]。Zyzzyva中的主节点会对客户端发出的请求进行排序,排序完成后才会按照顺序依次转发给其他的节点。节点会根据历史记录执行客户端发出的请求,并且将执行结果反馈给客户端,接着客户端根据节点的反馈结果分别执行不同的操作。",
    "context12": "在容错方面,Zyzzyva共识算法无法容忍恶意节点与不可控节点,所以不具备容错性。在性能方面，Zyzzyva共识算法中的领导者有绝对权限,有中心化的潜在风险，但是由于提前选举出领导者，节点之间不需要额外计算消耗争夺记账权，所以整体性能校高[18]。"
  },
  "（2）证明类共识算法": {
    "context1": "证明类共识算法通过竞争的方式完成任务，每个节点在共识过程中必须通过一份证明来确认做过一定量的工作，或者是具备某种特定的能力来竞争获得记账权。Pow、PoS、PoB属于此类共识算法。"
  },
  "$\\textcircled{1}$ PoW": {
    "context1": "工作量证明(Proof ofWork,PoW)算法[19]的核心思想是根据节点的计算力进行竞争使得数据能够达成一致，在此条件下，共识的安全性能够得到保障。可以将PoW算法简单理解为通过一份证明确认做过一定量的工作,在比特币系统中，得到合理的区块哈希值(BlockHash)需要经过大量尝试计算，当某个节点提供出一个合理的区块哈希值,说明该节点确实经过了大量的尝试计算。",
    "context2": "在性能方面,工作量证明算法有着安全、完全去中心化、适用等优点，主流的数字币都采用了这种方案,是最原始的区块链共识算法。由于节点需要通过消耗强大的算力资源竞争记账权，所以计算过程中造成大量算力资源的浪费是PoW算法最明显的缺点。交易时间过长导致效率低下，平均每秒只能处理5\\~7笔交易，挖矿活动集中容易形成中心化等都是PoW算法的缺点。",
    "context3": "$\\textcircled{2}$ PoS",
    "context4": "由于工作量证明算法消耗算力过大、交易时间过长等缺点,2012年King等提出了权益证明(Proofof Stake,PoS)算法[20],并基于PoW和PoS的混合机制发布了点点币PPCoin。",
    "context5": "权益证明算法的思想与在银行中存款获得利息这一现象相似,根据数字货币的持有数量与持有时间获得相应利息，而银行存款获得利息的多少也是根据存款的数量和存款的时间而定。参与者需要投资系统中的货币并且需要在系统指定的时间内完成验证,查看自己是否是下一个区块的创造者,如果是则参与到下一个区块的创建中完成区块创建。而区块的创造者根据特定的方式确定,每个参与者都有可能是下一个区块的创造者，在此算法下参与者被选中为区块创造者的概率与其拥有的货币数量成正比。",
    "context6": "在权益证明算法中，用户所获得的货币利息与币龄相关。在该模式下，每个数字货币每天产生一币龄。比如，系统中的某用户拥有300个系统货币，并且持有时间为20天,按照计算规则,此用户的币龄为 $3 0 0 { \\times } 2 0 { = } 6 0 0 0$ 。如果在该用户持有货币的第20天验证了区块，那么该用户拥有的6000币龄会被清空，与此同时，该用户获会得相应的货币利息。",
    "context7": "相比于工作量证明算法,权益证明算法存在安全性较差、容易受到攻击等缺点。但是在性能方面却有提升,拥有达成共识速度快、交易时间短等优点，相比于工作量证明算法平均每秒只能处理5\\~7"
  },
  "16 数据分析与知识发现": {
    "context1": "笔交易的效率,权益证明算法的处理速度是工作量证明算法的4\\~6倍，每秒能处理30笔左右的交易。",
    "context2": "$\\textcircled{3}$ PoB",
    "context3": "焚烧证明(Proof of Burn,PoB)算法[21],通过烧手中的虚拟币来竞争区块链网络中的领导地位，是工作量证明算法的替代算法，用于解决工作量证明算法的高能耗问题，通常被描述为不消耗能源的工作量证明算法。",
    "context4": "使用燃烧证明当作共识算法的区块链中，矿工将虚拟货币发送到可验证的特定地址，发送货币的过程即为货币焚烧的过程,矿工向此地址发送的虚拟货币越多,那么获得区块链网络领导地位的概率越高，同时被选中去挖掘下一个更好区块的概率就越大。这一过程与比特币系统的挖矿过程类似，比特币系统中的矿工依赖于强大的算力，计算出哈希值获得比特币奖励。而焚烧证明算法中需要矿工燃烧虚拟货币，得到更好的挖掘区块。随着越来越多的挖矿者加入，矿工需要燃烧更多的虚拟币满足更高的风险。",
    "context5": "相比于其他的共识算法,焚烧证明算法在性能方面有着可持续更新、降低能源消耗、安全性更好以及试用虚拟矿机来代替挖矿硬件等优点。但也存在虚拟矿机浪费资源和虚拟货币、在更大规模的区块链上工作的能力不足以及燃烧加密货币的过程可以被普通用户轻易验证等缺点。焚烧证明算法在交易速度上相比于工作量证明算法并没有较大提升。"
  },
  "（3）随机类共识算法": {
    "context1": "随机类共识算法根据某种随机方式随机确定每轮的记账节点，此随机方法可以是随机抽签算法、随机分配算法等。AlgoRand和PoET共识算法都属于随机类共识算法。"
  },
  "$\\textcircled{1}$ AlgoRand": {
    "context1": "2016年，图灵奖得主Micali主导提出了AlgoRand算法[22]。该算法的本质是通过随机算法从一群大范围的验证者中选出一部分验证者运行拜占庭容错算法。AlgoRand算法的共识过程分为两个步骤：随机选取区块生成者生成区块;BA\\*算法达成共识。",
    "context2": "随机生成区块时,算法提出的可验证随机函数（VerifiableRandomFunction,VRF)能够产生一组可验证的随机数。区块链中任何节点都可以通过验证函数检验VRF随机生成数的真实性。每一轮的区块生产者与验证委员，通过兑奖的方式查看自己是否是下一轮的生产者,而不是使用\"公开选举\"的方式。AlgoRand算法利用可验证随机函数掩盖生产者选举的步骤，一般的拜占庭容错算法会在每轮开始前公开选举出下一区块的生产者以及委员会成员,AlgoRand算法则是在每一轮开始时公布中奖号码,在中奖者表明自己的身份之前,没有人可以预测下一轮的生产者以及委员会人选。",
    "context3": "AlgoRand的拜占庭协议BA\\*类似于两个阶段的投票过程。在第一阶段,选出“验证者\"共识最多的候选区块;在第二阶段，“验证者\"对候选区块运行二元拜占庭协议，要么接受此候选区块，要么接受空区块。",
    "context4": "在性能方面,AlgoRand算法实现了较高的可扩展性、较好的容错性、一定程度的去中心化,但是由于AlgoRand算法是通过较少的验证节点对区块链网络中的所有交易进行验证,当加入网络中的节点增多、网络中的交易增多时,只能保证不会对性能造成太大影响。在容错方面,AlgoRand算法采用的是扩展后的拜占庭共识,具有N个节点的系统中允许N/3个节点为作恶节点,AlogRand的容错性更好,安全性也更高。在交易速度方面,AlogRand算法也更加高效,与工作量证明算法相比,系统吞吐量(TPS)增长125倍,共识达成时间在1分钟以内。",
    "context5": "$\\textcircled{2}$ PoET",
    "context6": "PoET算法[23]由芯片制造巨头Intel于2016年提出，目的是解决\"随机领导者选举\"的计算问题。",
    "context7": "使用PoET作为共识算法的区块链中，每个参与节点都必须等待随机生成的等待时间，并按照设定的时间休眠。具有最短等待时间的节点最先结束休眠，醒来之后的节点会向区块链提交一个新区块，然后向整个区块链网络中广播生成信息。上述过程将会重复以不断向区块链中增加新的区块。参与节点在本质上会自然地选取一个随机的时间,而非某一个参与者为胜出而刻意选取较短的时间。",
    "context8": "在性能方面，PoET算法不必消耗昂贵算力来挖矿，能有效降低交易时间、提高交易效率;同时通过内在机制保证所有参与者随机的等待时间,真正实现了公平性。相比于其他算法，PoET算法中领导者一直在变化,而其缺点也较为明显,安全区是一项复杂的技术,可能比工作证明更容易作弊,有集中化的趋势，因为必须使用第三方信任的证书颁发机构来确保安全。"
  },
  "（4）联盟类共识算法": {
    "context1": "联盟类共识算法的思想与“代议制\"思想一致，首先采用特定方式选举出多个代表节点，接着代表节点会以轮流的方式或选举的方式获得区块链系统中的记账权。授权股份证明(Delegated Proof-of-Stake,DPoS)共识算法便属于联盟类共识算法。",
    "context2": "尽管PoS被认为是安全的,但它仍然具有某些漏洞。PoS算法的主要缺陷是其主观性较弱,这意味着可能会创建多个链并同时继续存在，导致无风险攻击和远程攻击的可能性很高。为应对PoS主观性较弱的问题，某些协议会在网络上获得可信赖的来源,并定期广播有效链的哈希值,但是却破坏了权力下放的整个本质。",
    "context3": "比特股项目于2013年8月提出授权股份证明(DPoS)算法[24],解决了PoS算法的遗留问题。使用授权股份证明算法的区块链系统中，每个持有此系统数字货币的用户进行投票选出系统代表，所有用户都选择委派的见证人，他们有权代表其他人投票并运行整个节点。拥有此系统货币的所有者通过投票选举出区块签名的验证人，系统中任意一个参与者只要拥有超过 $1 \\%$ 的投票，即可参与到决策会议中。授权股份证明算法的原理与会议制度相似，如果被选举出来的代表不能完成签署区块的特有职责,那代表就会被取消签署资格或者被除名，下一步的网络则会选出新的代表来代替他们参与到决策会议中完成区块的签署。",
    "context4": "授权股份证明算法采取间接民主代议制，试图解决工作量证明算法和权益证明算法的遗留问题,通过引入间接民主代议制抵消集中化引起的负面影响。在性能方面,由于算法减少了确认要求,授权股份证明算法显著提高了区块链处理数据的效率，性能大幅提升,在吞吐量高、达成共识时间短等优点的加持下甚至可以实现秒到账，同时，选择区块安全者和验证节点质量的算法也大幅降低了维护区块链网络安全的成本，确保了区块链网络的安全性。但是",
    "context5": "DPoS也面临着算法实现较为复杂、存在安全漏洞等问题。",
    "context6": "（5）拜占庭类共识算法",
    "context7": "$\\textcircled{1}$ BFT",
    "context8": "Lamport等[25]通过拜占庭将军问题提出了著名的拜占庭容错(Byzantine Fault Tolerance,BFT)算法。拜占庭将军问题是指如何在有叛徒的军队中使所有将军依旧能达成正确的共识,合作攻打拜占庭帝国。拜占庭将军问题模型中需要满足以下两个条件：第一，所有忠诚节点接受完全相同的命令，按照命令严格执行得到完全相同的结果;第二,如果各位将军收到的命令是正确的，则所有忠诚将军必须要执行此命令。",
    "context9": "与拜占庭问题模型中存在的角色一致,区块链网络中也存在\"忠诚的拜占庭将军\"(正常运行的服务器节点)与\"叛变的拜占庭将军\"(故障节点与作恶节点）。发生故障的节点以及作恶节点被称为拜占庭节点，正常的节点被称为非拜占庭节点。在区块链网络中，非拜占庭节点之间通过正常的通信将公认的交易写入到区块记录中，而拜占庭节点试图伪造交易信息，通过花费其并不拥有的虚拟货币等行为作恶,破坏正常的交易过程。区块链中的拜占庭类共识算法要求在具有N个节点的网络中,拜占庭节点不超过 $\\mathrm { \\bf M } \\left( \\mathrm { \\bf N } { \\geqslant } 3 \\mathrm { \\bf M } { + } 1 \\right)$ )个时依旧能达成正确的共识。",
    "context10": "原始的拜占庭容错算法通过各个节点相互发送消息对提案和指令达成最终统一的共识结果,然而正是由于这一特点使节点之间消息传递呈指数级复杂度,算法的复杂度随着节点的增加呈指数级增加，并且节点的加入和退出这一步骤需要进行特殊处理,更加降低了拜占庭容错算法的可行性。虽然这一算法存在很多缺点也不太具有实际操作性,但是它在解决拜占庭问题上给出了一种新型的思路，为后来实用性拜占庭容错算法(PBFT)的出现做出铺垫。",
    "context11": "$\\textcircled{2}$ PBFT",
    "context12": "由于原始拜占庭容错算法效率不高且实际操作性过低等缺点，1999年Castro等[26]提出实用拜占庭容错算 法（Practical Byzantine Fault Tolerance,PBFT)。",
    "context13": "实用拜占庭容错算法可以理解为状态机副本复制算法,节点角色被分为客户端、主节点和从节点（备份节点）。在运行时，算法会任取区块链系统中的节点作为主节点,其他节点被称为从节点(备份节点)。当客户端向主节点发送请求时，主节点会通过广播的形式将客户端的请求转发给其他副本节点,所有副本节点执行请求，并将执行结果反馈到客户端,客户端收到来自不同副本节点的反馈,但需要接收到 $\\mathrm { F } { + } 1$ 个不同副本节点反馈的相同结果,才能将反馈的结果作为整个操作的最终结果。实用拜占庭容错算法通过降低原始拜占庭容错算法的复杂度，提高拜占庭算法的实际应用性。",
    "context14": "在性能方面，实用拜占庭容错算法具有监督节点参与、具备权限分级能力、完全去中心化、能够容忍信息错误等优点，同时可以保证区块链系统中各节点数据账本的一致性更高,并且耗能更低。在容错方面,使用实用性拜占庭容错算法的区块链系统中只要非正常节点控制在三分之一的比例下就能保证系统的正确共识。除此之外,实用拜占庭容错算法在交易速度上也有所提升，每秒能完成30个交易。但算法也存在不足,为了保证异步模式下的安全性，三个阶段的广播需要消耗多项式级的通信成本，高昂的通信成本导致算法的效率降低，并且在实用性拜占庭容错算法中主节点的随机选取可能会使选取的主节点是无效的恶意节点，导致重复选举的发生进而影响算法效率。此外，因为算法的计算效率依赖参与协议的节点，当区块链中节点数量过多时,实用拜占庭容错算法还会暴露出扩展性差以及通信效率过低等弊端。",
    "context15": "$\\textcircled{3}$ RBFT",
    "context16": "Redundant-BFT共识算法[27]与实用拜占庭容错算法的实现过程类似，与之不同的是在预备阶段前增加了传播阶段。客户端将消息发送给 $\\mathrm { F } { + } 1$ 个节点,在传播阶段， $\\mathrm { F } { + } 1$ 个节点之间会互相进行消息传递,验证各个节点是否能接收消息,确保区块链系统中所有正常节点都能接收到客户端发出的请求。",
    "context17": "在容错方面,需要至少 $3 \\mathrm { F } { + } 1$ 个节点才能容忍F个拜占庭节点。与PBFT算法不同的是,RBFT共识算法是有限节点记账的共识算法，系统中只有被认可的节点才能作为记账节点，并且使用随机数选取",
    "context18": "节点。",
    "context19": "在性能方面，RBFT算法在选择节点时的随机性将节点静态的选择过程变为动态选择，使参与选择的节点增加,增大了区块链系统的资源消耗。RBFT算法类似于授权股份证明算法，但支持的节点数目远远超过EOS(21个），这可以使系统在不牺牲性能的前提下提高安全性。同时通过RBFT、BLS签名等技术，可以大大减少投票数量，提升区块的处理速度。",
    "context20": "$\\textcircled{4}$ Hybrid Quorum",
    "context21": "HQ（Hybrid Quorum）算 法[28]在 $\\mathrm { Q } / \\mathrm { U }$ 算法和PBFT算法的基础上进行参考和优化。在没有竞争的情况下简化了PBFT节点之间的通信，提高了节点之间的通信效率。HQ算法的共识过程分为两个阶段：第一阶段,客户端发送请求并且收集所有节点的状态信息。当收到的反馈表明 $2 \\mathrm { F } { + } 1$ 个节点有相同的状态并且可以执行客户端发出的请求之后，进入到共识的第二阶段,客户端开始向各节点发送操作请求,节点接受到请求并执行请求信息。",
    "context22": "在容错方面，使用HQ作为共识算法的区块链系统中需要 $3 \\mathrm { F } { + } 1$ 个节点容错。在性能方面,HQ共识算法如果发现节点之间存在竞争现象，则采用实用拜占庭容错算法的解决过程,但是在解决过程中,HQ算法的性能也随之退化。",
    "context23": "$\\textcircled{5}$ OBFT",
    "context24": "OBFT(Obfuscated BFT)算法[29]是基于客户端方法的典型代表。为避免异常节点对正常节点产生攻击行为，基于客户端的算法采用的是避免节点之间互相通信的方式。此算法完全依赖于客户端,假设客户端都是正常的,没有异常行为的发生,那么在客户端出现故障时就会被外部感知。此算法采用动态设置超时时间的方式,保证了区块链共识过程可以优先进行同步模式的拜占庭容错,当触发超时，将切换回部分同步模式的拜占庭容错。",
    "context25": "在容错方面，OPET算法需要 $3 \\mathrm { F } { + } 1$ 个节点进行容错,其中的节点不需要与协议中的其他节点联系，只需与客户端保持联系即可，这一点与很多BFT协议中的节点通信不同,避免了异常节点或恶意节点攻击正常节点，从而影响系统正常运行的问题。",
    "context26": "在性能方面，针对通信成本过高问题,OBFT算法通过动态超时时间实现了乐观同步拜占庭容错，并且结合PBFT算法中的检查点协议，一旦触发超时,说明此时节点处于异步状态。同时利用积分制优化了主节点选取过程,保证可供选择的主节点符合区块链最长链原则，一定程度上保证了主节点的安全性和有效性。虽然OBFT算法主要适用于节点规模较小的联盟链,算法存在一定的应用局限,但是针对联盟链应用场景,OBFT算法相较PBFT算法在数据吞吐量和可拓展性上有较大的性能提升，并且有效地降低了交易延迟。但这都是基于较强的假设：必须完全信任客户端不会作恶。因此该类协议都存在较难在实际场景中应用的问题。",
    "context27": "$\\textcircled{6}$ IPBFT",
    "context28": "针对实用拜占庭协议消耗高、吞吐量低导致共识效率低下等问题,有学者提出IPBFT算法[30]。该算法采用协商与执行节点分离的方式减少执行请求的服务器数量,在一致性协议中加入自证机制,用心跳检测机制和最长链选举原则对主节点选举进行改进。基于传统PBFT算法改进的拜占庭共识算法IPBFT算法能够减少开销、增大吞吐量，并且实现了协商节点与执行节点分离。为避免节点的浪费，采取一部分节点负责协商请求、一部分节点负责执行请求的分离策略。而对于执行时间较长的请求，改进算法则是通过降低请求节点的数量提升系统吞吐率。IPBFT算法中主节点的选举方式使用心跳检测以及最长链选举,使得主节点的选举方式更加合理，选举出的主节点更加具有稳定性和安全性。在一致性协议中,加入自证机制,进一步减少了拜占庭节点的作恶几率,提高了系统的稳定性。",
    "context29": "性能方面，IPBFT算法将协商与执行节点分离，对于执行时间较长的请求，减少执行请求的服务器数量可以较大程度地提升系统吞吐率。将主节点的选举改为心跳检测机制和最长链选举方式,进一步提高了主节点选举的安全性和实用性。在三阶段协商中加入自证机制,进一步减少了作恶几率,提高了系统的稳定性。通过实验分析,IPBFT算法在通信消耗、吞吐率和延时性方面都有很大的提升,具有一定的可靠性。但是IPBFT算法还存在一些问题：容错性能以及网络的通信量问题依旧没有解决。"
  },
  "2.3小结": {
    "context1": "共识算法是区块链的关键技术之一，随着区块链技术的不断发展,应用场景不断涌现,提高区块链和联盟链的性能也是一个新的研究热点。由于共识算法研究发展速度较快,出现的共识算法较多,上文提及的共识算法仅为分类中有代表性的部分算法，表示共识算法的分类与提高性能过程中的演进。共识算法在确保安全性的条件下朝着不断提高交易速度、提升性能的方向发展。上文工作可为后续共识算法性能提升的研究提供思路与启发。"
  },
  "3高效智能合约引擎": "",
  "3.1智能合约概述": "",
  "（1）智能合约": {
    "context1": "智能合约由 Szabo在1995年提出，他将智能合约定义为\"一套以数字形式定义的承诺,包括合约参与方可以在上面执行这些承诺的协议\"[31]。智能合约的理念是在无需第三方参与的情况下，达到可信的状态并且能够执行合约条款的电子交易协议，由程序控制具备实用价值的物理客体，担任达成此合约双方或者是多方共同信任的代理,高效并且诚实地履行合约。",
    "context2": "承诺是指参与的双方同意执行的权力和义务，承诺定义了合约的本质和目的。但是数字形式的智能合约只能以代码的形式出现，因此智能合约中所规定的参与方的权力和义务只能由计算机执行。协议是合约中承诺的技术实现或实现承诺的记录。智能合约中规定了合约条款，并且包含触发条件，满足触发条件时合约便会自行执行。无人售货机可以看作是智能合约的雏形。"
  },
  "(2）智能合约与区块链的关系": {
    "context1": "智能合约可借助区块链的去中心化、不可篡改、交易过程可追踪等特性有效实现。区块链中的数据不可修改、删除,保证了区块链中节点的数据可追溯性;由于作恶行为将被区块链系统中其他节点永久记录增加了节点的作恶成本，能有效防止链中节点作恶;由于区块链去中心化的特点,避免了主节点或主服务器的中心化因素。基于以上原因,区块链中的智能合约可以避免节点的恶意干扰进而提升工作效率。同时得益于区块链中的共识机制,智能合约可以在去信任、可执行的环境中高效运行。",
    "context2": "智能合约与区块链的结合，使得智能合约被赋予了新的含义，区块链逐渐成为智能合约最主要的计算场景。"
  },
  "（3）智能合约的工作原理": {
    "context1": "基于区块链的智能合约包括事务处理和保存机制。事务是指要发送的数据,事件是指对发送数据的描述。智能合约中的资源状态会随着事务与事件的传入而更新，更新后的合约资源会触发状态判断机制,如果合约资源中包含满足触发的条件，此时的状态机便会自动执行约定好的合约动作。",
    "context2": "智能合约系统不会产生或者修改智能合约，其核心在于智能合约以事务和事件的状态经过智能合约模块处理之后并不会发生改变，处理后的状态与处理前的状态保持一致,依旧是事务和事件。智能合约系统只是一个执行的平台，能够让带有触发条件的数字化的协议按照规则制定者与协议参与者的意愿正确执行。"
  },
  "3.2智能合约关键技术": {
    "context1": "智能合约的生命周期根据其运行机制可概括为协商、开发、部署、运维、学习和自毁6个阶段,其中开发阶段包括合约上链前的合约测试,学习阶段包括智能合约的运行反馈与合约更新等。智能合约的基础架构模型自底向上由基础设施层、合约层、运维层、智能层、表现层和应用层组成[32]。",
    "context2": "在智能合约的隐私层面，由于其受制于区块链的性能,所以目前对于逻辑性较强和吞吐率较高的数据缺乏保护。第二层扩展解决方案(Layer 2Scaling Solution,Layer2)[33]是改善区块链及智能合约性能的可行办法。Taxa[34]区块链通过可信硬件为智能合约创造隔离的链下执行环境,公有链作为\"共识层\"记录最终的通证支付和合约状态转换结果,借此将智能合约的执行与公有链的共识机制分离，实现部分链上操作的链外管理,促成高性能、高隐私、可跨链的智能合约。",
    "context3": "而在智能层面，目前的智能合约完成的仅仅是一系列\"if-then\"的规则，从严格意义上讲，并不具备真正的智能。但是随着机器学习、深度学习等新兴计算机技术的发展,人工智能的加入可以将智能合约推动到具有感知、学习、理解、预测等真正的智能。",
    "context4": "（1）以太坊",
    "context5": "2013年,Buterin[35提出以太坊的概念:基于区块链数据结构并且可实现智能合约的系统。以太坊中智能合约的调用与执行是由EVM模块完成的。在智能合约调用时，根据智能合约地址取得程序源码在EVM中完成运行；以太坊主要用Solidity语言完成智能合约逻辑代码的编写，但是执行之前需要进行预编译,将编译完成后的字节码通过EVM执行。",
    "context6": "以太坊智能合约旨在实现4个目的：",
    "context7": "$\\textcircled{1}$ 存储对其他合约或外部实体有意义的值或状态；$\\textcircled{2}$ 作为具有特殊访问策略的外部账户；$\\textcircled{3}$ 映射和管理多个用户之间的关系；$\\textcircled{4}$ 为其他合约提供支持。",
    "context8": "基于这4个目的，以太坊智能合约有着广泛应用,如储蓄钱包、云计算、版权管理系统、身份和信誉系统、去中心化存储以及去中心化自治社会[36]。",
    "context9": "在性能方面,以太坊的优势在于可移植性好且安全性高。可移植性好的优点得益于EVM强大的可移植性，只要EVM的相应功能在不同平台上得以实现,Solidity可以轻松做到跨平台移植。安全性高的优点源于虚拟机的高安全性,对于虚拟机而言安全性并不需要过多考虑，威胁安全的主要因素来自于合约代码。执行效率低下是以太坊的劣势。"
  },
  "（2）Hyperledger Fabric": {
    "context1": "Hyperledger[37]项目从属于Linux基金会,旨在开发区块链的开源生态系统,构建支撑业务的行业应用平台。",
    "context2": "Fabric[38]是Hyperledger的一个子项目,其中包括共识算法、加密算法、数字资产、智能合约等可切换和可扩展的组件。超级账本的设计原则是“用例驱动”,Fabric项目主要支持5种用例：数字支付、金融资产管存、供应链、主数据管理和共享经济[36]。",
    "context3": "超级账本通过超级账本合约来操作账本，在部署时，将超级账本合约部署到区块链网络节点的Docker容器中，使用Docker作为合约的执行环境。交易的本质是在调用超级账本合约的函数方法。",
    "context4": "在性能方面，由于超级账本采用Go语言作为合约编码语言，得益于Go语言高效的执行效率，超级账本也拥有高效的执行效率。但是安全性方面超级账本还存在些许不足,相比于虚拟机的稳定健壮,Docker容器不但自身可能产生漏洞,而且其中的系统、运行容器等都可能存在漏洞，并且不易排查。"
  },
  "（3）比特币脚本": {
    "context1": "比特币脚本并非是函数的语法结构，计算能力非常有限,并且不支持循环语句,只能实现基本的算术、逻辑运算及验证加密功能。早期的智能合约应用范围非常有限,主要是对数据进行加锁和解锁,不存在复杂的逻辑。由于其技术过于落后,远跟不上现在智能合约的应用与发展，因以比特币脚本并不会是智能合约在未来的发展方向。"
  },
  "（4）CITA智能合约": {
    "context1": "CITA智能合约将区块链节点的功能进行解耦合,将功能解耦为不同的组件,其中包括：达成共识、处理交易、身份验证、授权管理等,组件之间通过消息通道进行信息交互。同时CITA智能合约的设计充分考虑了通用性与未来扩展的可能,通过配置和定制相应的服务，满足企业级的应用需要。在CITA智能合约中,矿工是出块节点,使用智能合约需要支付给出块节点手续费,这里支付比例是可以自定义调整的,同时CITA可以调节为无币模式,在无币模式下，不存在手续费[39]。"
  },
  "3.3小结": {
    "context1": "智能合约与区块链相辅相成，是区块链技术的特性之一,区块链成就了智能合约并成为智能合约的载体。上文首先对智能合约进行概述,包括智能合约的简介、智能合约与区块链的关系以及智能合约的工作原理;接着阐述智能合约的关键技术,并介绍了智能合约的基础架构,对智能合约中隐私和智能面临的挑战及其进展进行分析;最后介绍智能合约实现平台，分析其实现技术以及优缺点。",
    "context2": "近年来智能合约发展迅猛，但其仍面临着许多不可忽视的挑战,比如隐私问题、安全问题、性能问题、法律问题等，任意一个问题的出现都将导致智能合约的瘫痪。随着计算机技术的不断发展,特别是以深度学习为首的人工智能技术的发展,将智能合约与人工智能技术相结合，未来的智能合约将具有更高水准的隐私性、安全性和智能性。"
  },
  "4结语": {
    "context1": "本文依据陈纯院士提出的高性能区块链的关键技术展开综述。其中高性能关键技术包括高效共识算法、高效智能合约引擎[9]。本文从共识算法出发，介绍共识算法的概要,重点介绍了主流的共识算法。通过对共识算法的选主策略进行分类,对类别下的算法展开详细介绍，以共识算法的性能为主线，重点分析了安全性、交易速度、隐私性等方面的优缺点。通过对共识算法的性能分析，了解共识算法在提高安全性的同时提高共识效率的发展过程。接着，从智能合约与区块链的关系入手，简单介绍智能合约的概况，并对智能合约的基础架构以及面临的隐私问题和智能问题的解决方法展开叙述，最后着重介绍了智能合约的主流平台，分析实现智能合约平台的优劣，并分析了智能合约面临的挑战和未来的发展趋势。",
    "context2": "通过对共识算法以及智能合约引擎演变与发展的介绍，有助于了解在区块链和联盟链中安全性、隐私性、高效性等性能提升的发展过程。在区块链技术迅猛发展的前景下,如何提高区块链和联盟链的性能,使其能够达到高性能的任务要求依然面临着挑战,但随着共识算法容错性和处理效率的提升,基于区块链智能合约效率和安全性能的提升,区块链的在隐私性、安全性等方面的性能也会随之提高，从而达到整体高性能的水准。"
  },
  "参考文献：": {
    "context1": "[1]Nakamoto S. Bitcoin: A Peer-to-Peer Electronic Cash System[R]. Manubot, 2019.   \n[2] Treleaven P,Brown R G,Yang D.Blockchain Technology in Finance[J]. Computer,2017,50(9): 14-17.   \n[3] Chang V,Baudier P, Zhang H,et al.How Blockchain Can Impact Financial Services-The Overview, Challengesand Recommendations from Expert Interviewees[J].Technological Forecasting and Social Change,2020,158:120166.   \n[4] Saberi S,Kouhizadeh M,Sarkis J,et al.Blockchain Technology and Its Relationships to Sustainable Supply Chain Management [J].International Journal of Production Research,2019,57(7): 2117-2135.   \n[5] Chen Y,Ding S,Xu Z,et al.Blockchain-Based Medical Records Secure Storage and Medical Service Framework[J].Journal of Medical Systems,2019,43(1):Article No.5.   \n[6] Smorgunov L V. Blockchain as Institution of Procedural Justice [J].Polis.Political Studies,2018,5(5): 88-99.   \n[7] Saleh H，Avdoshin S,Dzhonov A．Platform for Tracking Donations of Charitable Foundations Based on Blockchain Technology[C]/Proceedings of the 2019 Actual Problems of Systems and Software Engineering. IEEE,2019:182-187.   \n[8] Yan J,Zhang F,Ma J,et al.Environmental Monitoring System Based on Blockchain[C]//Proceedings of the 4th International Conference on Crowd Science and Engineering. 2019: 40-43.   \n[9] 陈纯.联盟区块链关键技术与区块链的监管挑战[J].中国工业 和信息化,2020(11):54-58.(Chen Chun.Key Technologies of Alliance Block Chain and Regulatory Challenges of Block Chain [J].China Industry and Information Technology，2020(11): 54-58.)   \n[10] 韩璇,刘亚敏.区块链技术中的共识机制研究[J].信息网络安 全，2017(9):147-152.(Han Xuan,Liu Yamin.Research on the Consensus Mechanisms of Blockchain Technology[J].Netinfo Security,2017(9):147-152.)   \n[11] Rodriguez G E,Benavides D E,Torres J,et al. Cookie Scout: An Analytic Model for Prevention of Cross-Site Scripting (XSS) Using a Cookie Classifier[C]//Proceedings of the International Conference on Information Technology and Systems. Springer, Cham,2018:497-507.   \n[12]袁勇,王飞跃.区块链技术发展现状与展望[J].自动化学报, 2016,42(4): 481-494.(Yuan Yong,Wang Feiyue.Blockchain: The State of the Art and Future Trends[J].Acta Automatica Sinica, 2016,42(4): 481-494.)   \n[13]Lamport L.The Part-Time Parliament[J].ACM Transactions on Computer Systems,1998,16(2): 133-169.   \n[14]杨立君,郭林.面向云计算基础课程的Paxos算法教学设计研 究[J].软件导刊 2019,18(10):191-194,200.(Yang Lijun,Guo Lin.Research on Teaching Design of Paxos Algorithm for Basic Courses of Cloud Computing[J]. Software Guide,2019,18(10): 191-194,200.)   \n[15]PDFT/Paxos/Raft-分布式一致性协议解析[R/OL].[2020-07-28]. https://www. jianshu.com/p/09d45e7ddbd7.(Analysis of PDFT/ Paxos/Raft Distributed Consistency Protocol[R/OL]. [2020-07- 28].https://www.jianshu.com/p/09d45e7ddbd7.)   \n[16]Ongaro D,Ousterhout J.In Search of an Understandable Consensus Algorithm[C]//Proceedings of the 2014 USENIX Annual Technical Conference.2014: 305-319.   \n[17]详解分布式共识(一致性)算法 Raft[R/OL].(2019-05-27). [2020-08-12].https://blog.csdn．net/nazeniwaresakini/article/ details/104220232.(Explain the Distributed Consensus Algorithm Raft[R/OL]. (2019-05-27).[2020-08-12]. htps://blog.csdn.net/ nazeniwaresakini/article/details/104220232.)   \n[18]Kotla R,Clement A,Wong E,et al. Zyzzyva: Speculative Byzantine Fault Tolerance[J]. Communications of the ACM, 2008, 51(11): 86-95.   \n[19]Li J，Wolf T.A One-Way Proof-of-Work Protocol to Protect Controllers in Software-Defined Networks[C]//Proceedings of the 2016 Symposium on Architectures for Networking and Communications Systems.2016:123-124.   \n[20]King S,Nadal S.PPCoin:Peer-to-Peer Crypto-Currency with Proof-of-Stake[OL]. Self-published Paper,August 19th, 2012.   \n[21] Karantias K,KiayiasA, Zindros D. Proof-of-burn[C]// Proceedings of the 2O2O International Conference on Fiancial Cryptography and Data Security. Springer, Cham,2020: 523-540.   \n[22] Gilad Y,Hemo R,Micali S,et al.Algorand: Scaling Byzantine Agreements for Cryptocurrencies[EB/OL]. (2017-09-24).[2020- 07-12]. http://eprint.iacr.org/2017/454.   \n[23] Chen L,Xu L, Shah N,et al. On Security Analysis of Proof-ofElapsed-Time(PoET)[C]//Proceedings of the 19th International Symposium on Stabilization,Safety,and Security of Distributed Systems. Springer, Cham,2017: 282-297.   \n[24]Larimer D.Delegated Proof of Stake[EB/OL]. (2014-04-03). [2020-07-31]. https://how.bitshares.works/en/master/technology/ dpos.html.   \n[25]Lamport L, Shostak R,Pease M.The Byzantine Generals Problem [J].ACM Transactions on Programming Languages and Systems (TOPLAS),1982,4(3).DOI:10.1145/357172.357176.   \n[26] Castro M,Liskov B.Practical Byzantine Fault Tolerance[C]// Proceedings of the 3rd Symposium on Operating Systems Design and Implementation. 1999.   \n[27]Aublin P L,Mokhtar S B,Quema V.RBFT:Redundant ByzantineFaultTolerance[C]//Proceedingsofthe33rd International Conference on Distributed Computing Systems. IEEE,2013: 297-306.   \n[28] Cowling JA,Myers D S,Liskov B,et al. HQ Replication: A Hybrid Quorum Protocol for Byzantine Fault Tolerance[C]/ Proceedings of the 7th USENIX Symposium on Operating SystemsDesign and Implementation， Seattle,WA,USA. USENIX Association, 2006.   \n[29]Shoker A, Bahsoun JP, Yabandeh M. Improving Independence of Failuresin BFT[C]//Proceedings of the 12th International Symposium on Network Computing and Applications. IEEE, 2013: 227-234.   \n[30] 韩镇阳,宫宁生,任珈民.一种区块链实用拜占庭容错算法的 改进[J].计算机应用与软件,2020,37(2):226-233,294.(Han Zhenyang,Gong Ningsheng,Ren Jiamin.An Improved Block Chain Practical Byzantine Fault Tolerant Algorithm[J]. Computer Applications and Software,2020,37(2): 226-233,294.)   \n[31]Szabo N. Smart Contracts[EB/OL]. [2020-08-20]. http://www. fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/ Literature/LOTwinterschool2006/szabo．best.vwh.net/smart. contracts.html."
  }
}